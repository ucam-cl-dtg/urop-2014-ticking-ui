<!doctype html>
<html>
<head>
	<script src="../bower_components/platform/platform.js"></script>
	<link rel="import" href="../bower_components/font-roboto/roboto.html">
	<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
	<link rel="import" href="../elements/card.html">
	<style>
		html, body {
			font-family: RobotoDraft, 'Helvetica Neue', Helvetica, Arial;
			margin: 0;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<core-ajax id="loginAjax"
		url="../temp.html"
		handleAs="json"
		on-core-response="{{loginResponse}}">
	</core-ajax>
	<!-- <core-ajax id="loginAjax"
		url="http://urop2014.dtg.cl.cam.ac.uk/UROP_UI/api/raven/login"
		on-core-response="{{loginResponse}}">
	</core-ajax> -->
	<template id="ldapBind" bind="{{data}}">
		<user-card id="card" ldap="{{data}}"></user-card>
	</template>
	<script>
		window.addEventListener('polymer-ready', function(e) {
			var t = document.getElementById('ldapBind');
			t.model = {	data : {} }
	        var loginAjax = document.getElementById('loginAjax');
	        var card = document.getElementById('card')

	        // LDAP API response.
	        loginAjax.addEventListener('core-response', function(e) {
	        	t.model.data.push(loginAjax.response);
	        	console.log(card.ldap);
	        });

	        loginAjax.go(); // Call its API methods.
	    });
	</script>
</body>
</html>