<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="main-card.html">
<link rel="import" href="tickerSignupsView/TickerSignupsCard.html">
<link rel="import" href="tickerSignupsView/TickerSignupsViewport.html">
<link rel="import" href="file-browser/file-browser-card.html">

<polymer-element name="ticker-signup" attributes="groupId isMarker isAdmin sessionId sessionName location description">
	<template>
		<link rel="stylesheet" type="text/css" href="../css/elements/group.css" shim-shadowdom>
		<div class="container">
			<template>
				<are-you-sure id="dialog" on-yes="{{yes}}" on-no="{{no}}" heading="Are you sure you wish to kick {{crsId}} from this slot?"></are-you-sure>
				<div hidden?="{{!((isMarker||isAdmin)&&(sessionId))}}">
					<main-card animated>
						<ticker-signups-card on-toggle-are-you-sure="{{toggleAreYouSure}}" on-hide-report="{{hideReport}}" on-show-report="{{showReport}}" kick="{{kick}}" reason="{{reason}}" refresh="{{!viewReport}}" studentMode="{{false}}" locationx="{{location}}" descriptionx="{{description}}" sessionName="{{sessionName}}" sessionId="{{sessionId}}" slotId={{slotId}} crsId="{{crsId}}" tickId="{{tickId}}" repoName="{{repoName}}" ticker="{{ticker}}" groupId="{{groupId}}" id="tickerSignupsCard"></ticker-signups-card>
					</main-card>
					<main-card animated hidden?="{{!viewReport}}">
						<file-browser-card id="filebrowser" on-hide-report="{{hideReport}}" slotId="{{slotId}}" sheetId="{{sessionId}}" crsid="{{crsId}}" tickId="{{tickId}}" repoName="{{repoName}}" ticker="{{ticker}}"></file-browser-card>
					</main-card>
				</div>
				<div hidden?="{{!(!(isMarker||isAdmin)&&(sessionId))}}">
					<main-card animated>
						<ticker-signups-card studentMode="{{true}}" locationx="{{location}}" descriptionx="{{description}}" sessionName="{{sessionName}}" sessionId="{{sessionId}}" slotId={{slotId}} crsId="{{crsId}}" tickId="{{tickId}}" repoName="{{repoName}}" ticker="{{ticker}}" groupId="{{groupId}}" id="tickerSignupsCard"></ticker-signups-card>
					</main-card>
				</div>
			</template>
		</div>
	</template>
	<script>
	Polymer('ticker-signup', {
            hideReport: function(e, detail) {
				this.reason = detail.reason;
				this.viewReport = false;
            },
			showReport: function () {
				// Code to show report again.
				this.viewReport = true;
			},
			toggleAreYouSure: function() {
				this.$.dialog.toggle();
			},
			yes : function() {
				console.log("kick = true");
				this.toggleAreYouSure();
				console.log("kicking...");
				this.kick = true;
			},
			no : function() {
				console.log("kick = false");
				this.toggleAreYouSure();
			}
		});
    </script>
</polymer-element>