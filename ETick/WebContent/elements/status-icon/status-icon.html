<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">

<polymer-element name="status-icon" attributes="mode big showText">
    <template>
        <link rel="import" href="../tick-card/tick-components.css">
        <style>
            .small {
                width: 24px;
                height: 24px;
            }
            .big{
                width: 48px;
                height: 48px;
            }
            .status-icon-label {
                margin-right: 10px;
                color: #757575;
            }
        </style>

        <div layout horizontal>
            <template if="{{showText}}">
                <div layout vertical>
                    <div flex></div>
                    <div class="status-icon-label error">
                        <!-- Unfortunately if this expression is split onto multiple lines Polymer can't process it -->
                        {{mode == '-' ? 'Not started' : mode == 'I' ? 'Not submitted' : mode == 'F' ? 'Failed automated tests' : mode == 'U' ? 'Passed automated tests' : mode == 'P' ? 'Passed' : 'Unknown status code'}}
                    </div>
                    <div flex></div>
                </div>
            </template>
            <core-icon class="{{big == false ? 'big' : 'small'}}" icon="{{iconName}}"></core-icon>
        </div>
    </template>
    <script>
        Polymer('status-icon', {
            created: function() {
                this.iconName = "";
            },

            showTextChanged: function() {
                console.log("showText", this.showText);
            },

            modeChanged: function() {
                switch (this.mode) {
                    case "-": //not started
                        this.iconName = "";
                        break;
                    case "I": //initialised (i.e. started but not submitted)
                        this.iconName = "create"; //"more-horiz";
                        break;
                    case "F": //failed automated tester
                        this.iconName = "clear";
                        break;
                    case "U": //passed automated tester
                        this.iconName = "done";
                        break;
                    case "P": //passed human tests
                        this.iconName = "done-all";
                        break;
                    default:
                        this.iconName = "";
                        console.log("Error: invalid icon code", this.mode);
                        break;
                }
            }
        });
    </script>
</polymer-element>