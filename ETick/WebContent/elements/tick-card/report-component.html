<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<polymer-element name="report-component" attributes="reportAvailable repoName repo testRunning unitPass">
    <template>
        <link rel="stylesheet" type="text/css" href="../../css/shared-styles.css" shim-shadowdom>
        <link rel="stylesheet" type="text/css" href="tick-components.css" shim-shadowdom>
        <style>
            .redButton {
                background: #e51c23;
            }
            .amberButton {

            }
            .greenButton {
                background: #259b24;
            }
        </style>

        <!-- View report button -->
        <core-collapse opened?="{{reportAvailable}}">
            <paper-button class="{{unitPass ? 'greenButton' : 'redButton'}}" label="LATEST REPORT" on-tap="{{showReport}}"></paper-button>
        </core-collapse>

        <!-- No report available error message -->
        <core-collapse opened?="{{!reportAvailable}}">
            <div class="error">No reports available</div>
        </core-collapse>
    </template>
    <script>
        Polymer('report-component', {
            showReport: function() {
                var regex = /^[^:]*:\/\/[^/]*\/(.*)\.git$/;
                this.repoName = this.repo.match(regex)[1];

                //having set repoName, databinding awesomeness will cause the report to automatically animate up
            }
        });
    </script>
</polymer-element>
