<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<polymer-element name="report-component" attributes="reportAvailable repoName repo testRunning unitPass">
    <template>
        <link rel="stylesheet" href="../../css/shared-styles.css">
        <link rel="stylesheet" href="tick-components.css">
        <style>
            .redButton {
                background: #e51c23;
            }
            .amberButton {

            }
            .greenButton {
                background: #259b24;
            }
        </style>

        <!-- View report button -->
        <core-collapse opened?="{{reportAvailable}}">
            <paper-button class="{{unitPass ? 'greenButton' : 'redButton'}}" label="LATEST REPORT" on-tap="{{showReport}}"></paper-button>
        </core-collapse>

        <!-- No report available error message -->
        <core-collapse opened?="{{!reportAvailable}}">
            <div class="error">No reports available</div>
        </core-collapse>
    </template>
    <script>
        Polymer('report-component', {
            ready: function() {
                this.testRan = null;
            },

            showReport: function() {
                var regex = /urop2014\.dtg\.cl\.cam\.ac\.uk\/(.*)\.git/;
                this.repoName = this.repo.match(regex)[1];
            }

            /*testRunningChanged: function() {
                if (this.testRunning) {
                    this.testRan = true;
                } else {
                    if (this.testRan) {
                        this.showReport();
                    }
                }
            }*/
        });
    </script>
</polymer-element>