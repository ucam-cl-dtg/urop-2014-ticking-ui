<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../sheet-selector.html">
<link rel="import" href="../../bower_components/core-collapse/core-collapse.html">

<polymer-element name="signup-component" attributes="tickId sheets signedUp unitPass testRunning">
    <template>
        <link rel="stylesheet" href="../../css/shared-styles.css">
        <link rel="stylesheet" href="tick-components.css">

        <core-collapse opened?="{{!signedUp && !testRunning}}">
            <paper-button class="greenButton" label="SIGN UP" on-tap="{{openSignupDialog}}"></paper-button>
        </core-collapse>

        <core-collapse opened?="{{signedUp}}">
            <paper-button class="greenButton" label="CANCEL SIGN UP" on-tap="{{showCancelDialog}}"></paper-button>
        </core-collapse>

        <core-collapse hidden?="{{testRunning || !unitPass}}>
            <div class="error">To sign up, your latest submission must have passed the unit tester</div>
        </core-collapse>

        <core-collapse opened?="{{testRunning}}">
            <div class="error">Sign up unavailable while a test is running</div>
        </core-collapse>
        <sheet-selector id="signupDialog" sheets="{{sheets}}" tickId="{{tickId}}"></sheet-selector>
    </template>
    <script>
        Polymer('signup-component', {
            openSignupDialog: function() {
                this.$.signupDialog.toggle();
            },

            showCancelDialog: function() {
                //TODO
            }
        });
    </script>
</polymer-element>