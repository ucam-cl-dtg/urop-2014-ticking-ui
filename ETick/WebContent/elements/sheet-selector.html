<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">

<link rel="import" href="../bower_components/paper-dialog/paper-dialog-transition.html">

<link rel="import" href="../bower_components/paper-button/paper-button.html">

<polymer-element name="sheet-selector" attributes="sheets">
	<template>
		<link rel="stylesheet" type="text/css" href="../css/shared-styles.css">
		<style>
			:host {
				display: block;
			}
			.custom-dropdown {
				width: 100%;
			}

			.custom-dropdown__select{
				width: 100%;
			    font-size: 1rem; 
			    padding: .5em; /* add some space*/
			    margin: 0; /* remove default margins */
			    background: #f0f0f0;
			}

			@supports (pointer-events: none) and
			      ((-webkit-appearance: none) or
			      (-moz-appearance: none) or
			      (appearance: none)) {

			    .custom-dropdown {
			        position: relative;
			        display: inline-block;
			        vertical-align: middle;
			    }

			    .custom-dropdown__select {
			        padding-right: 2.5em; /* accommodate with the pseudo elements for the dropdown arrow */
			        border: 0;
			        border-radius: 3px;
			        -webkit-appearance: none;
			        -moz-appearance: none;
			        appearance: none;    
			    }

			    .custom-dropdown::before, .custom-dropdown::after {
			        content: "";
			        position: absolute;
			        pointer-events: none;
			    }

			    .custom-dropdown::after { /*  Custom dropdown arrow */
			        content: "\25BC";
			        height: 1em;
			        font-size: .625em;
			        line-height: 1;
			        right: 1.2em;
			        top: 50%; margin-top: -.5em;
			    }

			    .custom-dropdown::before { /*  Custom dropdown arrow cover */
			        width: 2em;
			        right: 0; top: 0; bottom: 0;
			        border-radius: 0 3px 3px 0;
			    }

			    /* FF only temp fix */
			    @-moz-document url-prefix() {
			        .custom-dropdown__select { padding-right: .9em }
			    }
			}
		</style>
		<paper-button label="DIALOG" on-click="{{clicked}}"></paper-button>
		<paper-dialog id="dialog" backdrop heading="Select Ticking Session:" transition="core-transition-top">
			<span class="custom-dropdown">
				<select id="selector" on-change="{{sheetSelectionChanged}}"
					class="custom-dropdown__select">
				<option disabled selected>Select Ticking Session...</option>
				<template repeat="{{sheet in sheets}}">
					<option sheetid="{{sheet._id}}">{{sheet.title}}</option>
				</template>
			</select>
			</span>
			<template if="{{selection}}">
				<paper-button id="sheetSubmit" class="dialogSubmit" label="DONE" on-click="{{sheetSelected}}" affirmative></paper-button>
			</template>
		</paper-dialog>
	</template>
	<script>
		Polymer('sheet-selector', {
			clicked: function () {
				this.toggle();
			},

			toggle: function () {
				this.$.dialog.toggle();
			},

			sheetSelectionChanged: function () {
				var sel = this.$.selector;
				this.selection = sel.options[sel.selectedIndex].getAttribute('sheetid');
			},

			sheetSelected: function () {
				console.log(this.selection + ': selected');
			}

		});
	</script>
</polymer-element>