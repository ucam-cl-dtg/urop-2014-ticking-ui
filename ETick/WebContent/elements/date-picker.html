<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer-date-picker/polymer-date-picker.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<polymer-element name="date-picker" attributes="selectedDate opened error">
      <template>
        <style>
          :host {
            display: block;
          }

          polymer-date-picker {
            z-index: 15;
          }

          paper-input /deep/ input {
            margin: 0;
            padding: 0.5rem 0;
          }
        </style>
        
        <polymer-date-picker id="datePicker" selectedDate="{{selectedDate}}" relatedTarget="{{$.trigger.$.input}}" opened="{{opened}}"></polymer-date-picker>
        <paper-input id="trigger" value="{{displayDate}}" on-click="{{toggle}}" required readonly error="{{error}}"></paper-input>

      </template>
    <script>
      Polymer('date-picker', {

        domReady: function () {
          var datePicker = this.$.datePicker;
          var headerPanel = document.getElementById('scaffold').shadowRoot.getElementById('headerPanel');
          headerPanel.addEventListener('scroll', function () {
            datePicker.reposition();
          })
        },

      	opened: false,

        displayDate: "No date selected...",

        toggle: function() {
            this.$.datePicker.toggle();
        },
        open: function() {
            this.$.datePicker.open();
        },

        selectedDateChanged: function (oldValue, newValue) {
          if (oldValue)
            this.displayDate = newValue;
        }
      });
    </script>
</polymer-element>