<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-menu/core-submenu.html">
<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-menu/core-menu.html">
<link rel="import" href="../bower_components/core-item/core-item.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">


<polymer-element name="my-sidebar" attributes="items">
	<template>
		<link rel="stylesheet" type="text/css" 
			href="../css/elements/sidebar.css" shim-shadowdom>
			<core-toolbar class="core-header">
				<img src="../images/otterlogo.png" height="30px" width="30px">
				<div>Otter</div>
			</core-toolbar>
			<div id="dropShadow"></div>
			<core-menu id="menu" valueattr="label" selected=0 on-core-select="{{selectAction}}">
				<template repeat="{{item in items}}">
					<core-item icon="{{item.icon}}" label="{{item.label}}" url="{{item.url}}"></core-item>
				</template>
			</core-menu>

			<!-- API call to populate sidebar menu. -->
			<core-ajax id="sidebarAjax"
				url="http://localhost:8080/UROP_UI/api/group/user"
				handleAs="json"
				on-core-response="{{handleResponse}}">
			</core-ajax>
	</template>
	<script>
		Polymer('my-sidebar', {
			ready: function () {
				this.$.sidebarAjax.go();
			},
			selectAction : function(e, detail) { 
				if (detail.isSelected) {
					this.selected = detail.item;
				}
			},
			handleResponse: function() {
				this.items = this.$.sidebarAjax.response;
			}
		}); 
	</script>
</polymer-element>