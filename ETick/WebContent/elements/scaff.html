<!--
	! Dead buttons in top toolbar.
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-scaffold/core-scaffold.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="sidebar.html">

<polymer-element name="my-scaffold">
	<template>
		<link rel="stylesheet" type="text/css" 
			href="../css/elements/scaff.css" shim-shadowdom>
			<core-scaffold mode="standard" id="scaffold">

				<!-- Sidebar element. -->
				<my-sidebar id="sidebar" navigation></my-sidebar>

				<!-- Top toolbar. -->
				<div flex tool layout horizontal center>
			  		<div>{{heading}}</div>
				  	<div flex horizontal end-justified layout center>
				  		<paper-button label="help"></paper-button>
				  		<paper-button label="logout"></paper-button>
				  		<paper-icon-button icon="search"></paper-icon-button>
				  	</div>
			  	</div>

		  	<!-- Page Content -->
		  	<div id="card" class="move-up">
		  		<div id="frameContainer">
		          <iframe id="frame" on-load="{{frameLoaded}}"></iframe>
		        </div>
		  	</div>
			</core-scaffold>
	</template>
	<script>
		Polymer('my-scaffold', {
			ready: function () {
			},	
			
			// Update top toolbar heading. 
			observe: {
				'$.sidebar.selected' : 'selectedChanged'
			},
			selectedChanged: function(oldValue, newValue) {
				if (newValue.getAttribute('url')) {
					this.heading = newValue.label;
					this.$.frame.contentWindow.location.replace(newValue.getAttribute('url'));
					this.animateCard();
				}
			},

			// Page card animations. 
			moveCard: function (y) {
				var s = this.$.card.style;
				s.webkitTransform = s.transform = y ? 'translate(0, ' + y + 'px)': '';
			},
			animateCard: function() {
		    	this.$.card.classList.remove('move-up');
		    	this.$.card.style.display = 'none';
		    	this.async(function () {
		    		this.$.card.style.display = 'block'
		    		this.moveCard(this.$.scaffold.offsetHeight);
		    		this.async(function () {
		    			this.$.card.classList.add('move-up');
		    			this.moveCard(null);
		    		}, null, 300);
		    	});
		    }
		});
	</script>
</polymer-element>
