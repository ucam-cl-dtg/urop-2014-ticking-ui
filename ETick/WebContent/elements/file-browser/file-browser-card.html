<!-- vim: set shiftwidth=2 tabstop=2 softtabstop=2 expandtab textwidth=72 : -->
<link rel="import" href="../../bower_components/polymer/polymer.html"/>
<link rel="import" href="../../bower_components/core-splitter/core-splitter.html"/>
<link rel="import" href="files-service.html"/>
<link rel="import" href="file-card.html"/>
<link rel="import" href="files-list.html"/>

<polymer-element name="file-browser-card" attributes="repoName">
  <!-- TODO: get ALL reports -->
  <template>
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="file-browser-style.css"/>
    <files-service id="service"
                   repoName="{{repoName}}"
                   files="{{files}}"
                   testResult="{{testResult}}"
                   tickerResult="{{tickerResult}}"
                   reportResult="{{reportResult}}"
                   comments="{{comments}}"
                   errors="{{errors}}"
                   commitID="{{commitID}}"
                   date="{{date}}"
                   testCount="{{testCount}}">
    </files-service>
    <div class="container" horizontal layout>
      <div class="sidebar">
        <p class="result">
          You have {{testResult=="FAIL" ? "failed." : "passed!"}}
        </p>
        <files-list files="{{files}}">
        </files-list>
        <hr/>
        <!-- TODO: The following element -->
        <errors-list></errors-list>
      </div>
      <core-splitter direction="left"></core-splitter>
      <div flex>
        <!-- Ticker comments -->
        <template if="{{comments != null}}">
          <p>{{comments}}</p>
        </template>

        <!-- File contents -->
        <template repeat="{{file in files}}">
          <file-card content="{{file.content}}"
                     name="{{file.name}}"
                     comments="{{errors}}">
          </file-card>
        </template>

      </div>
    </div>

  </template>
  <script>
    Polymer('file-browser-card'
      , {
        });
  </script>
</polymer-element>
