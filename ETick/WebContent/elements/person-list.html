<!-- List of person-box's -->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/core-selector/core-selector.html">
<link rel="import" href="person-box.html">

<polymer-element name="person-list" attributes="people boxWidth query">
	<template>
		<style>
			:host {
				display: block;
				width: 100%;
			}
			core-selector {
				width: 100%;
				height: 100%;
			}
			person-box {
				width: calc(100% / 3);
			}
			person-box:nth-child(odd) {
				background: #f6f6f6;
			}
			person-box:nth-child(even) {
				background: #e9e9e9;
			}

			/* Styles of selected box. */
			person-box.core-selected {
				background: #CCCCCC;
				box-shadow: 
					inset 0 2px 3px rgba(255,255,255,0.3),
					inset 0 -2px 3px rgba(0,0,0,0.3),
					0 1px 1px rgba(255,255,255,0.9);
			}
		</style>
		<core-selector multi layout horizontal center wrap 
			id="memberSelector" valueattr="crsid">
			<template repeat="{{person in people | filter(query) }}">
					<person-box
						name="{{person.displayName}}"
						crsid="{{person._id}}"
						college="{{person.college == 'Unknown' ? '' : person.college}}"
						isStudent="{{person.isStudent}}">
					</person-box>	
			</template>	
		</core-selector>
	</template>
	<script>
		Polymer('person-list', {

			listFilter: function(item) {
				var q = this.query.toLowerCase();
				return (item.displayName.toLowerCase().indexOf(q) > -1 ||
						item._id.toLowerCase().indexOf(q) > -1 ||
						item.college.toLowerCase().indexOf(q) > -1);
			},

			filter: function(items, q) {
				if (items && q) {
					return items.filter(this.listFilter.bind(this));
				}
				return items;
			}
		});
	</script>
</polymer-element>