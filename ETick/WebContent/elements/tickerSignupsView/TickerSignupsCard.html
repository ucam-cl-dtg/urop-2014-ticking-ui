<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/core-item/core-item.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-collapse/core-collapse.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="TickerSignupsViewport.html">

<polymer-element name="ticker-signups-card" attributes="kick reason refresh crsId tickId studentMode repoName ticker groupId sessionId sessionName slotId locationx descriptionx">
    <template>
        <style>
            :host {
                width: 100%;
                font-size: 1.2rem;
                font-weight: 300;
            }
            .topBar {
                height : 100%;
                width : 100%;
            }
            .viewer-panel {
                padding: 20px;
				padding-top: 5px;
                width: 100%;
                font-size: 1.2rem;
                font-weight: 300;
            }
            core-item.core-selected {
                color: purple;
            }

        </style>

        <div class="topBar" layout horizontal>
            <core-toolbar flex style="background-color:#2D91EC;color:white">
                <div id="title">Signup slots for {{sessionName}}</div>
            </core-toolbar>
        </div>

        <div layout horizontal>
            <div flex class="viewer-panel">
                <ticker-signups-viewport studentMode={{studentMode}} on-show-report={{showReport}} kick="{{kick}}" location="{{locationx}}" description="{{descriptionx}}" slotId={{slotId}} crsId="{{crsId}}" tickId="{{tickId}}" repoName="{{repoName}}" ticker="{{ticker}}" id="view" sessionId="{{sessionId}}" description="{{description}}" location="{{location}}"></ticker-signups-viewport>
            </div>
        </div>


    </template>
    <script>
        Polymer( 'ticker-signups-card', {
            toggleMenu: function() {
                this.$.panel.toggle();
            },
            alertError: function() {
                alert("Sorry, something went wrong");
            },
			updateTickerViewer: function(detail) {
                this.$.view.updateViewConsole(detail.result);
            },
            crsIdChanged: function() {
                console.log("Switching report to: crsid: " + this.crsId + ", tickId: " + this.tickId + ", repoName: " + this.repoName + ", ticker: " + this.ticker);
            },
			sessionIdChanged: function() {
				this.$.view.refresh();
			},
			refreshChanged: function() {
				if(this.refresh) {
					this.$.view.updateViewConsole(this.reason);
					this.refresh = !this.refresh;
				}
			}
        })
    </script>
</polymer-element>
