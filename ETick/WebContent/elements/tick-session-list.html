<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="search-box.html">
<link rel="import" href="tick-session-box.html">
<link rel="import" href="box-list.html">
<link rel="import" href="add-session.html">

<polymer-element name="tick-session-list" attributes="gid sheets isAuthor">
	<template>
		<style>
			:host {
				display: block;
				width: 100%;
			}
			h1 {
				font-size: 1.8rem;
				font-weight: 100;
				padding: 0 0 0 10px;
			}
		</style>

		<div id="headerBar" layout horizontal center end-justified>
			<!-- <h1 flex>Ticking Sessions ({{sheets ? sheets.length : 0}})</h1> -->
			<template if="{{isAuthor}}">
				<add-session gid="{{gid}}"></add-session>
			</template>
			<search-box id="searchBox" placeholder="Search..."></search-box>
		</div>

		<box-list id="list">
			<template repeat="{{sheet in sheets | sheetListFilter($.searchBox.query) }}">
				<tick-session-box class="itemBox" sheet="{{sheet}}"></tick-session-box>
			</template>
		</box-list>
	</template>
	<script>
		Polymer('tick-session-list', {
			sheetListFilter: function(items, q) {
				console.log(items);
				if (items && q) {
					return items.filter(this.sheetFilter.bind(this));
				}
				return items;
			},

			sheetFilter: function(item) {
				var q = this.$.searchBox.query.toLowerCase();
				return (item.title.toLowerCase().indexOf(q) > -1);
			},
		});
	</script>
</polymer-element>